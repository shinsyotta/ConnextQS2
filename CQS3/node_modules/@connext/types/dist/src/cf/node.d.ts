import { BigNumber, BigNumberish } from "ethers/utils";
import { AppABIEncodings, AppInstanceJson, AppInstanceProposal, OutcomeType, StateChannelJSON } from "./data-types";
import { SolidityValueType } from "./simple-types";
declare type JsonRpcProtocolV2 = {
    jsonrpc: "2.0";
};
declare type RpcParameters = {
    [key: string]: any;
} | any[];
export declare type JsonRpcNotification = JsonRpcProtocolV2 & {
    result: any;
};
export declare type JsonRpcResponse = JsonRpcNotification & {
    id: number;
};
export declare type Rpc = {
    methodName: string;
    parameters: RpcParameters;
    id?: number;
};
export interface IRpcNodeProvider {
    onMessage(callback: (message: JsonRpcResponse | JsonRpcNotification) => void): any;
    sendMessage(message: Rpc): any;
}
export declare namespace CFCoreTypes {
    type NodeMessage = {
        from: string;
        type: EventName;
    };
    type MinimalTransaction = {
        to: string;
        value: BigNumberish;
        data: string;
    };
    interface ServiceFactory {
        connect?(host: string, port: string): ServiceFactory;
        auth?(email: string, password: string): Promise<void>;
        createMessagingService?(messagingServiceKey: string): IMessagingService;
        createStoreService?(storeServiceKey: string): IStoreService;
    }
    interface IMessagingService {
        send(to: string, msg: CFCoreTypes.NodeMessage): Promise<void>;
        onReceive(address: string, callback: (msg: CFCoreTypes.NodeMessage) => void): any;
    }
    interface IStoreService {
        get(path: string): Promise<any>;
        set(pairs: {
            path: string;
            value: any;
        }[], allowDelete?: Boolean): Promise<void>;
        reset?(): Promise<void>;
    }
    interface IPrivateKeyGenerator {
        (s: string): Promise<string>;
    }
    interface ILockService {
        acquireLock(lockName: string, callback: (...args: any[]) => any, timeout: number): Promise<any>;
    }
    enum ErrorType {
        ERROR = "error"
    }
    enum MethodName {
        ACCEPT_STATE = "acceptState",
        GET_PROPOSED_APP_INSTANCE = "getProposedAppInstance"
    }
    const RpcMethodNames: {
        chan_create: string;
        chan_deposit: string;
        chan_deployStateDepositHolder: string;
        chan_getChannelAddresses: string;
        chan_getAppInstance: string;
        chan_getAppInstances: string;
        chan_getStateDepositHolderAddress: string;
        chan_getFreeBalanceState: string;
        chan_getTokenIndexedFreeBalanceStates: string;
        chan_getProposedAppInstances: string;
        chan_getState: string;
        chan_getStateChannel: string;
        chan_install: string;
        chan_requestDepositRights: string;
        chan_installVirtual: string;
        chan_proposeInstall: string;
        chan_rejectInstall: string;
        chan_updateState: string;
        chan_takeAction: string;
        chan_uninstall: string;
        chan_uninstallVirtual: string;
        chan_rescindDepositRights: string;
        chan_withdraw: string;
        chan_withdrawCommitment: string;
    };
    type RpcMethodName = keyof typeof RpcMethodNames;
    const EventNames: {
        CREATE_CHANNEL_EVENT: string;
        DEPOSIT_CONFIRMED_EVENT: string;
        DEPOSIT_FAILED_EVENT: string;
        DEPOSIT_STARTED_EVENT: string;
        INSTALL_EVENT: string;
        INSTALL_VIRTUAL_EVENT: string;
        REJECT_INSTALL_EVENT: string;
        UNINSTALL_EVENT: string;
        UNINSTALL_VIRTUAL_EVENT: string;
        UPDATE_STATE_EVENT: string;
        WITHDRAWAL_CONFIRMED_EVENT: string;
        WITHDRAWAL_FAILED_EVENT: string;
        WITHDRAWAL_STARTED_EVENT: string;
        PROPOSE_INSTALL_EVENT: string;
        PROTOCOL_MESSAGE_EVENT: string;
    };
    type EventName = keyof typeof EventNames;
    type CreateChannelParams = {
        owners: string[];
    };
    type CreateChannelResult = {
        multisigAddress: string;
        owners: string[];
        counterpartyXpub: string;
    };
    type CreateChannelTransactionResult = {
        multisigAddress: string;
    };
    type CreateMultisigParams = {
        owners: string[];
    };
    type CreateMultisigResult = {
        multisigAddress: string;
    };
    type DeployStateDepositHolderParams = {
        multisigAddress: string;
        retryCount?: number;
    };
    type DeployStateDepositHolderResult = {
        transactionHash: string;
    };
    type DepositParams = {
        multisigAddress: string;
        amount: BigNumber;
        tokenAddress?: string;
    };
    type DepositResult = {
        multisigBalance: BigNumber;
        tokenAddress: string;
    };
    type RequestDepositRightsResult = {
        freeBalance: {
            [s: string]: BigNumber;
        };
        recipient: string;
        tokenAddress: string;
    };
    type GetAppInstanceDetailsParams = {
        appInstanceId: string;
    };
    type GetAppInstanceDetailsResult = {
        appInstance: AppInstanceJson;
    };
    type GetStateDepositHolderAddressParams = {
        owners: string[];
    };
    type GetStateDepositHolderAddressResult = {
        address: string;
    };
    type GetAppInstancesParams = {
        multisigAddress?: string;
    };
    type GetAppInstancesResult = {
        appInstances: AppInstanceJson[];
    };
    type GetChannelAddressesParams = {};
    type GetChannelAddressesResult = {
        multisigAddresses: string[];
    };
    type GetFreeBalanceStateParams = {
        multisigAddress: string;
        tokenAddress?: string;
    };
    type GetFreeBalanceStateResult = {
        [s: string]: BigNumber;
    };
    type GetTokenIndexedFreeBalanceStatesParams = {
        multisigAddress: string;
    };
    type GetTokenIndexedFreeBalanceStatesResult = {
        [tokenAddress: string]: {
            [s: string]: BigNumber;
        };
    };
    type GetProposedAppInstancesParams = {
        multisigAddress?: string;
    };
    type GetProposedAppInstancesResult = {
        appInstances: AppInstanceProposal[];
    };
    type GetProposedAppInstanceParams = {
        appInstanceId: string;
    };
    type GetProposedAppInstanceResult = {
        appInstance: AppInstanceProposal;
    };
    type GetStateParams = {
        appInstanceId: string;
    };
    type GetStateResult = {
        state: SolidityValueType;
    };
    type GetStateChannelParams = {
        multisigAddress: string;
    };
    type GetStateChannelResult = {
        data: StateChannelJSON;
    };
    type InstallParams = {
        appInstanceId: string;
    };
    type RequestDepositRightsParams = {
        multisigAddress: string;
        tokenAddress?: string;
    };
    type InstallResult = {
        appInstance: AppInstanceJson;
    };
    type InstallVirtualParams = InstallParams & {
        intermediaryIdentifier: string;
    };
    type InstallVirtualResult = InstallResult;
    type ProposeInstallParams = {
        appDefinition: string;
        abiEncodings: AppABIEncodings;
        initiatorDeposit: BigNumber;
        initiatorDepositTokenAddress?: string;
        responderDeposit: BigNumber;
        responderDepositTokenAddress?: string;
        timeout: BigNumber;
        initialState: SolidityValueType;
        proposedToIdentifier: string;
        outcomeType: OutcomeType;
        meta?: Object;
    };
    type ProposeInstallVirtualParams = ProposeInstallParams & {
        intermediaryIdentifier: string;
    };
    type ProposeInstallVirtualResult = ProposeInstallResult;
    type ProposeInstallResult = {
        appInstanceId: string;
    };
    type RejectInstallParams = {
        appInstanceId: string;
    };
    type RejectInstallResult = {};
    type TakeActionParams = {
        appInstanceId: string;
        action: SolidityValueType;
    };
    type TakeActionResult = {
        newState: SolidityValueType;
    };
    type UninstallParams = {
        appInstanceId: string;
    };
    type RescindDepositRightsParams = {
        multisigAddress: string;
        tokenAddress?: string;
    };
    type UninstallResult = {};
    type UninstallVirtualParams = UninstallParams & {
        intermediaryIdentifier: string;
    };
    type UninstallVirtualResult = UninstallResult;
    type UpdateStateParams = {
        appInstanceId: string;
        newState: SolidityValueType;
    };
    type UpdateStateResult = {
        newState: SolidityValueType;
    };
    type WithdrawParams = {
        multisigAddress: string;
        recipient?: string;
        amount: BigNumber;
        tokenAddress?: string;
    };
    type WithdrawResult = {
        recipient: string;
        txHash: string;
    };
    type WithdrawCommitmentParams = WithdrawParams;
    type WithdrawCommitmentResult = {
        transaction: MinimalTransaction;
    };
    type MethodParams = GetAppInstancesParams | GetProposedAppInstancesParams | ProposeInstallParams | ProposeInstallVirtualParams | RejectInstallParams | InstallParams | InstallVirtualParams | GetStateParams | GetAppInstanceDetailsParams | TakeActionParams | UninstallParams | CreateChannelParams | GetChannelAddressesParams | DeployStateDepositHolderParams;
    type MethodResult = GetAppInstancesResult | GetProposedAppInstancesResult | ProposeInstallResult | ProposeInstallVirtualResult | RejectInstallResult | InstallResult | InstallVirtualResult | GetStateResult | GetAppInstanceDetailsResult | TakeActionResult | UninstallResult | CreateChannelResult | GetChannelAddressesResult | DeployStateDepositHolderResult;
    type CreateMultisigEventData = {
        owners: string[];
        multisigAddress: string;
    };
    type InstallEventData = {
        appInstanceId: string;
    };
    type RejectInstallEventData = {
        appInstance: AppInstanceProposal;
    };
    type UninstallEventData = {
        appInstanceId: string;
    };
    type UpdateStateEventData = {
        appInstanceId: string;
        newState: SolidityValueType;
        action?: SolidityValueType;
    };
    type WithdrawEventData = {
        amount: BigNumber;
    };
    type EventData = InstallEventData | RejectInstallEventData | UpdateStateEventData | UninstallEventData | CreateMultisigEventData;
    type MethodMessage = {
        type: MethodName;
        requestId: string;
    };
    type MethodRequest = MethodMessage & {
        params: MethodParams;
    };
    type MethodResponse = MethodMessage & {
        result: MethodResult;
    };
    type Event = {
        type: EventName;
        data: EventData;
    };
    type Error = {
        type: ErrorType;
        requestId?: string;
        data: {
            errorName: string;
            message?: string;
            appInstanceId?: string;
            extra?: {
                [k: string]: string | number | boolean | object;
            };
        };
    };
    type Message = MethodRequest | MethodResponse | Event | Error;
}
export {};
//# sourceMappingURL=node.d.ts.map